[env:esp32cam]
platform = espressif32
board = esp32cam
framework = arduino

# Build settings
monitor_speed = 115200
upload_speed = 460800
board_build.partitions = huge_app.csv

# Enable PSRAM for large audio buffers
board_build.arduino.memory_type = qio_opi

# Compiler optimizations for performance
build_flags = 
    -O2
    -DCORE_DEBUG_LEVEL=1
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_CDC_ON_BOOT=0
    -DARDUINO_USB_MSC_ON_BOOT=0
    -DARDUINO_USB_DFU_ON_BOOT=0
    -std=c++17
    
# Memory optimization
build_unflags = 
    -std=gnu++11

# Required libraries
lib_deps = 
    # TensorFlow Lite for Microcontrollers
    https://github.com/tensorflow/tflite-micro-arduino-examples
    
    # Audio processing
    https://github.com/kosme/arduinoFFT
    
    # JSON for configuration
    bblanchon/ArduinoJson@^6.21.3
    
    # WiFi and HTTP for optional logging
    WiFi
    HTTPClient
    ArduinoOTA

# Extra includes for TensorFlow Lite
build_src_filter = 
    +<*>
    +<../lib/tensorflow/lite/micro/>

# Monitor settings
monitor_filters = 
    esp32_exception_decoder
    time

# Flash settings for ESP32-CAM
board_build.flash_mode = qio
board_build.f_flash = 80000000L
board_build.f_cpu = 240000000L

# Debugging
debug_tool = esp-builtin
debug_init_break = tbreak setup

# Custom upload port (adjust as needed)
; upload_port = /dev/ttyUSB0
; monitor_port = /dev/ttyUSB0